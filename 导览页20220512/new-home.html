<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <script src="./cdn/util/polyfill.min.js"></script>
    <script type="text/javascript" src="./cdn/echarts.js"></script>
    <script src="./cdn/util/es6-promise.auto.min.js"></script>
    <link rel="stylesheet" href="./cdn/element-ui/2.4.11/theme-chalk/index.css">
    <style>
        [v-clock] {
            display: none;
        }

        html,
        body {
            margin: 0;
            padding: 0;
            height: 100%;
            font-size: 12px;
        }

        body .el-scrollbar__wrap {
            overflow-x: hidden;
        }

        #app {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .top {
            background-image: url('./image/topbanner.png');
            background-position: center;
            background-size: 100% 100%;
            background-repeat: no-repeat;
            width: 1919px;
            height: 85px;
        }

        .top-content {
            display: flex;
            padding: 20px 35px;
            align-items: center;
        }

        .top-title {
            font-size: 34px;
            font-family: YouSheBiaoTiHei;
            font-weight: 400;
            color: #FFFFFF;
            margin-left: 15px;
        }

        .top-btn {
            background-image: url('./image/btn02.png');
            background-size: 100% 100%;
            background-position: center;
            background-repeat: no-repeat;
            width: 170px;
            height: 40px;
            text-align: center;
            font-size: 24px;
            line-height: 39px;
            cursor: pointer;
            font-family: Alibaba PuHuiTi;
            font-weight: bold;
            color: #FFFFFF;
        }

        .top-btn1 {
            background-image: url('./image/btn01.png');
            background-size: 100% 100%;
            background-position: center;
            background-repeat: no-repeat;
            width: 170px;
            height: 40px;
            text-align: center;
            font-size: 24px;
            line-height: 39px;
            cursor: pointer;
            font-family: Alibaba PuHuiTi;
            font-weight: bold;
            color: #FFFFFF;
        }

        .page-content {
            width: 1852px;
            height: 890px;
            margin: 50px 30px;
            display: flex;
            justify-content: space-between;
        }

        .left {
            width: 802px;
            height: 890px;
            box-shadow: 0px 3px 21px 0px rgba(0, 102, 255, 0.2);
            border-radius: 10px;
        }

        .right {
            width: 1022px;
            height: 890px;
            box-shadow: 0px 3px 21px 0px rgba(0, 102, 255, 0.2);
            border-radius: 10px;
        }

        .left-content {
            width: 751px;
            height: 820px;
            margin: 35px 25px;
        }

        .right-content {
            width: 971px;
            height: 820px;
            margin: 35px 25px;
        }

        .line {
            width: 3px;
            height: 25px;
            float: left;
            /* border: 3px solid #008CEE; */
            background: linear-gradient(0deg, #1ED5B5, #0096FF);
        }

        .maintitle {
            font-size: 22px;
            margin-left: 15px;
            line-height: 24px;
            font-family: Alibaba PuHuiTi;
            font-weight: bold;
            color: #333333;
        }

        .left-flex {
            display: flex;
            width: 100%;
            justify-content: space-between;
        }

        .left-count {
            width: 306px;
            margin-left: 10px;
            margin-top: 45px;
        }

        .left-chart {
            width: 400px;
            height: 720px;
            margin-top: 45px;
        }

        .total-count-item {
            width: 306px;
            height: 120px;
            /* margin-left: 10px; */
            background: #EBF8FF;
            border: 2px solid #CADEEE;
            box-shadow: 0px 3px 10px 0px rgba(0, 102, 255, 0.2);
            border-radius: 5px;
            display: flex;
            align-items: center;
            margin-bottom: 25px;
            /* justify-content: center; */
        }

        .total-count-item-data {
            margin-left: 20px;
            height: 54px;
        }

        .total-count-item-image {
            padding-left: 25px;
            width: 54px;
            height: 54px;
        }

        .item-data-label {
            font-size: 20px;
            font-family: Microsoft YaHei;
            font-weight: bold;
            color: #333333;
            line-height: 30px;
        }

        .item-data-value {
            font-size: 20px;
            font-family: Microsoft YaHei;
            font-weight: bold;
            color: #333333;
            line-height: 30px;
        }

        .leftpie {
            width: 400px;
            position: relative;
            height: 380px;
            background: #FFFFFF;
            box-shadow: 0px 3px 10px 0px rgba(0, 102, 255, 0.2);
            border-radius: 10px;
        }

        .pieicon {
            position: absolute;
            top: 49%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .pietitlecon {
            padding-top: 20px;
            padding-left: 30px;
            padding-right: 30px;
        }

        .pietitle {
            font-size: 18px;
            font-family: Microsoft YaHei;
            font-weight: bold;
            color: #333333;
            line-height: 19px;
            margin-left: 8px;
        }

        .piecontainer {
            width: 400px;
            padding-top: 16px;
            height: 325px;
        }

        .leftline {
            margin-top: 30px;
            width: 400px;
            height: 310px;
            background: #FFFFFF;
            box-shadow: 0px 3px 21px 0px rgba(0, 102, 255, 0.2);
            border-radius: 10px;
        }

        .linecontainer {
            width: 400px;
            padding-top: 16px;
            height: 255px;
        }

        .right-flex {
            margin-top: 45px;
        }

        .right-item {
            width: 300px;
            height: 220px;
            margin-bottom: 30px;
            background: #FFFFFF;
            box-shadow: 0px 3px 10px 0px rgba(0, 102, 255, 0.2);
            border-radius: 10px;
        }

        .item-top {
            height: 50px;
            background: rgba(0, 102, 255, 0.2);
            border-radius: 10px 10px 0px 0px;
        }

        .itemtop-title {
            font-size: 20px;
            line-height: 50px;
            padding: 0px 17px;
            color: #0080FF;
        }

        .item-content {
            width: 266px;
            height: 134px;
            padding: 18px 17px;
        }

        .item-contentflex {
            display: flex;
            margin-bottom: 25px;
        }

        .normalbg {
            width: 85px;
            height: 28px;
            background: #F0F9EB;
            border: 1px solid #DDFDCB;
            border-radius: 5px;
            text-align: center;
            font-size: 18px;
            font-family: Alibaba PuHuiTi;
            font-weight: 400;
            color: #08A700;
        }

        .normaltitle {
            font-size: 18px;
            cursor: pointer;
            font-family: Microsoft YaHei;
            font-weight: bold;
            color: #333333;
            line-height: 25px;
            /* margin-left: 18px; */
        }

        @font-face {
            font-family: YouSheBiaoTiHei;
            src: url("./font/youshebiaoti.ttf");
        }

        @font-face {
            font-family: Alibaba PuHuiTi;
            src: url("./font/alipuhui/Alibaba-PuHuiTi-Bold.otf");
        }
    </style>
</head>

<body>
    <div id="app" v-clock>
        <el-scrollbar style="height:100%">
            <div class="top">
                <div class="top-content">
                    <img src="./image/logo.png" alt="">
                    <div class="top-title">国家顶级节点（一期）建设项目</div>
                    <div class="top-btn1" style="margin-left: 190px">首页</div>
                    <div class="top-btn" style="margin-left: 40px" @click="tosite1">综合管理</div>
                    <div class="top-btn" style="margin-left: 40px" @click="tosite7">标识查询</div>
                    <div class="top-btn" style="margin-left: 40px" @click="tosite11">解析监测</div>
                </div>
            </div>
            <div class="page-content">
                <div class="left">
                    <div class="left-content">
                        <div class="left-title">
                            <div class="line"></div>
                            <div class="maintitle">数据指标</div>
                        </div>
                        <div style="clear:both"></div>
                        <div class="left-flex">
                            <div class="left-count">
                                <div class="total-count-item" v-for="(item, index) in countData" :key="item.index">
                                    <div class="total-count-item-image">
                                        <img :src="tjPicArr[index]" />
                                    </div>
                                    <div class="total-count-item-data">
                                        <div class="item-data-label">{{ item.label }}</div>
                                        <div class="item-data-value">
                                            {{ item.value }}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="left-chart">
                                <div class="leftpie">
                                    <img src="./image/pieicon.png" alt="" class="pieicon">
                                    <div class="pietitlecon">
                                        <div class="line" style="height:19px"></div>
                                        <div class="pietitle">标识累计注册总量占比（全国）</div>
                                    </div>
                                    <div id="pie" class="piecontainer"></div>
                                </div>
                                <div class="leftline">
                                    <div class="pietitlecon">
                                        <div class="line" style="height:19px"></div>
                                        <div class="pietitle">标识日解析量</div>
                                    </div>
                                    <div id="lines" class="linecontainer"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="right">
                    <div class="right-content">
                        <div class="left-title">
                            <div class="line"></div>
                            <div class="maintitle">系统运行监测</div>
                        </div>
                        <div style="clear:both"></div>
                        <div class="right-flex">
                            <el-row type="flex" justify="space-between">
                                <el-col :span="7.5">
                                    <div class="right-item">
                                        <div class="item-top">
                                            <div class="itemtop-title">任务一：&nbsp;&nbsp;&nbsp;&nbsp;综合管理平台</div>
                                        </div>
                                        <div class="item-content">
                                            <div class="item-contentflex">
                                                <div class="normalbg">运行正常</div>&nbsp;&nbsp;&nbsp;&nbsp;
                                                <div class="normaltitle" @click="tosite1">综合管理平台</div>
                                            </div>
                                            <div class="item-contentflex">
                                                <div class="normalbg">运行正常</div>&nbsp;&nbsp;&nbsp;&nbsp;
                                                <div class="normaltitle" @click="tosite9">标识数据管理系统</div>
                                            </div>
                                            <div class="item-contentflex">
                                                <div class="normalbg">运行正常</div>&nbsp;&nbsp;&nbsp;&nbsp;
                                                <div class="normaltitle" @click="tosite10">运维监控系统</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="right-item">
                                        <div class="item-top">
                                            <div class="itemtop-title">任务四：&nbsp;&nbsp;&nbsp;&nbsp;标识搜索系统</div>
                                        </div>
                                        <div class="item-content">
                                            <div class="item-contentflex">
                                                <div class="normalbg">运行正常</div>&nbsp;&nbsp;&nbsp;&nbsp;
                                                <div class="normaltitle" @click="tosite8">标识搜索系统</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="right-item">
                                        <div class="item-top">
                                            <div class="itemtop-title">任务六：&nbsp;&nbsp;&nbsp;&nbsp;互联互通系统</div>
                                        </div>
                                        <div class="item-content">
                                            <div class="item-contentflex">
                                                <div class="normalbg">运行正常</div>&nbsp;&nbsp;&nbsp;&nbsp;
                                                <div class="normaltitle" @click="tosite13">互联互通系统</div>
                                            </div>
                                        </div>
                                    </div>
                                </el-col>
                                <el-col :span="7.5">
                                    <div class="right-item">
                                        <div class="item-top">
                                            <div class="itemtop-title">任务二：&nbsp;&nbsp;&nbsp;&nbsp;数据同步系统</div>
                                        </div>
                                        <div class="item-content">
                                            <div class="item-contentflex">
                                                <div class="normalbg">运行正常</div>&nbsp;&nbsp;&nbsp;&nbsp;
                                                <div class="normaltitle" @click="tosite14">数据同步系统</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="right-item">
                                        <div class="item-top">
                                            <div class="itemtop-title">任务五：&nbsp;&nbsp;&nbsp;&nbsp;标识查询系统</div>
                                        </div>
                                        <div class="item-content">
                                            <div class="item-contentflex">
                                                <div class="normalbg">运行正常</div>&nbsp;&nbsp;&nbsp;&nbsp;
                                                <div class="normaltitle" @click="tosite7">标识查询系统</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="right-item">
                                        <div class="item-top">
                                            <div class="itemtop-title">任务七：&nbsp;&nbsp;&nbsp;&nbsp;标识解析监测系统</div>
                                        </div>
                                        <div class="item-content">
                                            <div class="item-contentflex">
                                                <div class="normalbg">运行正常</div>&nbsp;&nbsp;&nbsp;&nbsp;
                                                <div class="normaltitle" @click="tosite11">标识解析监测系统</div>
                                            </div>
                                        </div>
                                    </div>
                                </el-col>
                                <el-col :span="7.5">
                                    <div class="right-item" style="height: 470px;">
                                        <div class="item-top">
                                            <div class="itemtop-title">任务三：&nbsp;&nbsp;&nbsp;&nbsp;标识解析系统</div>
                                        </div>
                                        <div class="item-content">
                                            <div class="item-contentflex">
                                                <div class="normalbg">运行正常</div>&nbsp;&nbsp;&nbsp;&nbsp;
                                                <div class="normaltitle" @click="tosite2">北京顶级解析服务</div>
                                            </div>
                                            <div class="item-contentflex">
                                                <div class="normalbg">运行正常</div>&nbsp;&nbsp;&nbsp;&nbsp;
                                                <div class="normaltitle" @click="tosite3">上海顶级解析服务</div>
                                            </div>
                                            <div class="item-contentflex">
                                                <div class="normalbg">运行正常</div>&nbsp;&nbsp;&nbsp;&nbsp;
                                                <div class="normaltitle" @click="tosite4">广州顶级解析服务</div>
                                            </div>
                                            <div class="item-contentflex">
                                                <div class="normalbg">运行正常</div>&nbsp;&nbsp;&nbsp;&nbsp;
                                                <div class="normaltitle" @click="tosite5">武汉顶级解析服务</div>
                                            </div>
                                            <div class="item-contentflex">
                                                <div class="normalbg">运行正常</div>&nbsp;&nbsp;&nbsp;&nbsp;
                                                <div class="normaltitle" @click="tosite6">重庆顶级解析服务</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="right-item">
                                        <div class="item-top">
                                            <div class="itemtop-title">任务八：&nbsp;&nbsp;&nbsp;&nbsp;安全保障系统</div>
                                        </div>
                                        <div class="item-content">
                                            <div class="item-contentflex">
                                                <div class="normalbg">运行正常</div>&nbsp;&nbsp;&nbsp;&nbsp;
                                                <div class="normaltitle" @click="tosite12">安全保障系统</div>
                                            </div>
                                        </div>
                                    </div>
                                </el-col>
                            </el-row>
                        </div>
                    </div>
                </div>
            </div>
        </el-scrollbar>
    </div>
</body>
<script src="./cdn/vue-2.6.11/vue.min.js"></script>
<script src="./cdn/element-ui/2.4.11/index.js"></script>
<script type="text/babel">
    // import echarts from './echarts'
    new Vue({
        el: '#app',
        data: function () {
            return {
                countData: [
                    {
                        label: '累计标识注册量',
                        value: '123456789012'
                    },
                    {
                        label: '标识日解析量',
                        value: '12345678012'
                    },
                    {
                        label: '二级节点数',
                        value: '123456789012'
                    },
                    {
                        label: '企业节点数',
                        value: '123456789012'
                    },
                    {
                        label: '覆盖省份',
                        value: '123456789012'
                    }
                ],
                pieData: [
                    { value: 1048, name: '北京' },
                    { value: 735, name: '上海' },
                    { value: 580, name: '广州' },
                    { value: 484, name: '武汉' },
                    { value: 300, name: '重庆' }
                ],
                lineData: [150, 230, 224, 218, 135, 147, 260],
                dateList: ['5-13', '5-13', '5-13', '5-13', '5-13', '5-13', '5-13'],
                tjPicArr: [
                    './image/01.png', './image/02.png', './image/03.png', './image/04.png', './image/05.png'
                ],
            }
        },
        mounted() {
            this.loadCount()
            this.getPieData()
            this.getLineData()
        },
        methods: {
            getPieData() {
                var xhr = new XMLHttpRequest();
                var url = `http://172.17.3.2:8003/tmp/ghr/ghrRegPie?checkKey=QWERTYUIOP@123`
                xhr.open('get', url, true);
                xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded;charset-UTF-8");
                xhr.send();
                let _this = this
                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4) {
                        //成功回调
                        if (xhr.status === 200) {
                            console.log(JSON.parse(xhr.response).data)
                            _this.pieData = JSON.parse(xhr.response).data.series[0].data
                            _this.loadPie()
                        } else {
                            console.error(xhr.status)
                            _this.loadPie()
                        }
                    }
                }
            },
            getLineData() {
                var xhr = new XMLHttpRequest();
                var url = `http://172.17.3.2:8003/tmp/ghr/handleDayRes?checkKey=QWERTYUIOP@123`
                xhr.open('get', url, true);
                xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded;charset-UTF-8");
                xhr.send();
                let _this = this
                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4) {
                        //成功回调
                        if (xhr.status === 200) {
                            console.log(JSON.parse(xhr.response).data)
                            _this.lineData = JSON.parse(xhr.response).data.series[0].data
                            _this.dateList = JSON.parse(xhr.response).data.dateList
                            _this.loadLine()
                        } else {
                            console.error(xhr.status)
                            _this.loadLine()
                        }
                    }
                }
            },
            loadPie() {
                var chartDom = document.getElementById('pie');
                var myChart = echarts.init(chartDom);
                var option;
                option = {
                    tooltip: {
                        trigger: 'item',
                        formatter: '{b} : {c} ({d}%)'
                    },
                    color: ['#0080FF', '#36FFCC', '#1EABFB', '#74CBFF', '#A0FEFF'],
                    legend: {
                        // top: '5%',
                        bottom: '20'
                    },
                    grid: {
                        width: 'auto',
                        height: 'auto',
                    },
                    series: [
                        {
                            name: 'Access From',
                            type: 'pie',
                            radius: ['40%', '60%'],
                            center: ['50%', '40%'],
                            // avoidLabelOverlap: false,
                            label: {
                                show: true,
                                position: 'outside',
                                formatter: '{d}%',
                                fontWeight: 'bold',
                                fontSize: 13,
                                color: '#333333'
                            },
                            emphasis: {
                                label: {
                                    show: true,
                                    fontSize: '20',
                                }
                            },
                            labelLine: {
                                show: true,
                                // length: 30,
                                length2: 30,
                                lineStyle: {
                                    width: 1.5
                                }
                            },
                            data: this.pieData
                        }
                    ]
                };
                option && myChart.setOption(option);
            },
            loadLine() {
                var chartDomLine = document.getElementById('lines');
                var myChartLine = echarts.init(chartDomLine);
                var optionLine;
                optionLine = {
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            type: 'cross'
                        },
                        padding: [5, 10]
                    },
                    color: ['#54B0FF'],
                    legend: {
                        show: false
                    },
                    grid: {
                        top: '45',
                        left: '55',
                        width: 'auto',
                        height: 'auto',
                    },
                    xAxis: {
                        type: 'category',
                        axisLine: {
                            show: false,
                        },
                        axisTick: {
                            show: false
                        },
                        axisLabel: {
                            fontFamily: 'Microsoft YaHei',
                            fontWeight: '400'
                        },
                        data: this.dateList,
                        nameTextStyle: {
                            color: "#333333"
                        }
                    },
                    yAxis: {
                        name: `单位：次`,
                        // splitNumber: '4',
                        // interval: '4',
                        nameTextStyle: {
                            color: "#333333",
                            fontWeight: 'bold'
                        },
                        textStyle: {
                            fontWeight: 'bold'
                        },
                        type: 'value',
                        axisLine: {
                            show: false,
                        },
                        axisTick: {
                            show: false
                        },
                        axisLabel: {
                            formatter(value) {
                                const texts = [];
                                if (value >= 10000 && value < 100000000) {
                                    const newVal = value / 10000;
                                    texts.push(`${newVal}万`);
                                } else if (value >= 100000000) {
                                    const newVal = value / 100000000;
                                    texts.push(`${newVal}亿`);
                                } else {
                                    texts.push(value);
                                }
                                return texts;
                            },
                            fontFamily: 'Microsoft YaHei',
                            fontWeight: '400'
                        }
                    },
                    series: [
                        {
                            name: '日解析量',
                            type: 'line',
                            data: this.lineData,
                            areaStyle: {
                                color: {
                                    type: 'linear',
                                    x: 0,
                                    y: 0,
                                    x2: 0,
                                    y2: 1,
                                    colorStops: [{//渐变颜色
                                        offset: 0,
                                        color: 'rgba(2, 191, 159, 0.2)'
                                    },
                                    {
                                        offset: 1,
                                        color: 'rgba(0, 150, 243, 0.2)'
                                    }],
                                    global: false,
                                }
                            }
                        },
                    ]
                };
                optionLine && myChartLine.setOption(optionLine);
            },
            loadCount() {
                var xhr = new XMLHttpRequest();
                var url = `http://172.17.3.2:8003/tmp/ghr/statData?checkKey=QWERTYUIOP@123`
                xhr.open('get', url, true);
                xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded;charset-UTF-8");
                xhr.send();
                let _this = this
                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4) {
                        //成功回调
                        if (xhr.status === 200) {
                            console.log(JSON.parse(xhr.response).data)
                            for (let i = 0; i < 5; i++) {
                                _this.countData[i].value = _this.toThousands(JSON.parse(xhr.response).data[i])
                            }
                        } else {
                            for (let i = 0; i < 5; i++) {
                                _this.countData[i].value = _this.toThousands(_this.countData[i].value)
                            }
                            console.error(xhr.status)
                        }
                    }
                }
            },
            toThousands(num) {
                num = (num || 0).toString()
                const re = /\d{3}$/
                let result = ''
                while (re.test(num)) {
                    result = RegExp.lastMatch + result
                    if (num !== RegExp.lastMatch) {
                        result = ',' + result
                        num = RegExp.leftContext
                    } else {
                        num = ''
                        break
                    }
                }
                if (num) {
                    result = num + result
                }
                return result
            },
            tosite1() {
                window.open("https://bmssh.idfactory.cn/bms/ui/login")
            },
            tosite2() {
                window.open("http://bj-res.idfactory.cn:8081/88.199")
            },
            tosite3() {
                window.open("http://sh-res.idfactory.cn:8081/88.199")
            },
            tosite4() {
                window.open("http://gz-res.idfactory.cn:8081/88.199")
            },
            tosite5() {
                window.open("http://wh-res.idfactory.cn:8081/88.199")
            },
            tosite6() {
                window.open("http://cq-res.idfactory.cn:8081/88.199")
            },
            tosite7() {
                window.open("https://idfactory.cn/")
            },
            tosite8() {
                window.open("https://idfactory.cn/dms/ui/login")
            },
            tosite9() {
                window.open("https://idfactory.cn/dms/ui/login")
            },
            tosite10() {
                window.open("http://172.17.3.39/IT_home/IT_login.php") 
            },
            tosite11() {
                window.open("https://idmonitor.idfactory.cn/login")
            },
            tosite12() {
                window.open("https://172.17.102.40:31943/")
            },
            tosite13() {
                window.open("https://dms.citln.cn/api/inquire/home/inquire/isomerismSite?prefix=")
            },
            tosite14() {
                window.open("http://192.168.103.50/zabbix/latest.php?filter_set=1&hostids[]=10416")
            }
        }
    })
</script>
<script src="./cdn/util/browser.min.js"></script>

</html>